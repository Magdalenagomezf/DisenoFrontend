<mat-card class="product-card">
  <!-- Header clickable: navega al detalle interno -->
  <div class="product-link" (click)="goDetail($event)">
    <mat-card-header>
      <div mat-card-avatar class="product-image-container">
        <img [src]="product().thumbnail" [alt]="product().title" class="product-img" />
      </div>
      <mat-card-title class="product-title">{{ product().title }}</mat-card-title>
      <mat-card-subtitle>{{ product().id }}</mat-card-subtitle>
    </mat-card-header>
  </div>

  <mat-card-content>
    <p class="product-description">{{ product().title | slice: 0 : 70 }}...</p>
  </mat-card-content>

  <mat-card-actions class="actions">
    <div class="price-section">
      <span class="price font-bold text-xl text-green-700">
        {{ product().price | currency: product().currency_id }}
      </span>
    </div>

    <div class="btns">
      <button mat-stroked-button color="primary" (click)="onToggleFav()">
        <mat-icon>favorite</mat-icon>
        Favorito
      </button>

      <button mat-raised-button color="primary" (click)="onAddToCart()">
        <mat-icon>add_shopping_cart</mat-icon>
        Agregar
      </button>

      <!-- Ver en sitio externo (sin href para evitar que capture el click del header) -->
      <button mat-flat-button (click)="openExternal($event)">
        <mat-icon>launch</mat-icon>
        Ver en el sitio
      </button>
    </div>
  </mat-card-actions>
</mat-card>
