<section *ngIf="!isLoading; else loadingTpl" class="detail-page">
  <img class="main-img" [src]="product.thumbnail" [alt]="product.title" />

  <div class="info">
    <h1>{{ product.title }}</h1>
    <div class="price">{{ product.price | currency:'USD' }}</div>
    <p class="desc">{{ product.description }}</p>

    <div class="actions">
      <button mat-raised-button color="primary" (click)="addToCart()">
        <mat-icon>add_shopping_cart</mat-icon>
        Agregar al carrito
      </button>

      <button mat-stroked-button color="primary" (click)="toggleFav()" [color]="isFav(product.id) ? 'warn' : undefined">
        <mat-icon>{{ isFav(product.id) ? 'favorite' : 'favorite_border' }}</mat-icon>
        {{ isFav(product.id) ? 'Quitar de favoritos' : 'Agregar a favoritos' }}
      </button>


    </div>

    <h3>Detalles</h3>
    <ul>
      <li><strong>Categoría:</strong> {{ product.category }}</li>
      <li><strong>Stock:</strong> {{ product.stock }}</li>
      <li><strong>Marca:</strong> {{ product.brand }}</li>
    </ul>

    <h3>Imágenes</h3>
    <div class="thumbs">
      <img *ngFor="let img of product.images" [src]="img" [alt]="product.title" />
    </div>

    <a routerLink="/" class="back">← Volver</a>
  </div>
</section>

<ng-template #loadingTpl>
  <div class="loading">Cargando producto...</div>
</ng-template>
